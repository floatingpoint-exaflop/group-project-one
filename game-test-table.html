<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/css/cardtable.css">
    <link rel="stylesheet" href="./assets/css/cards.css">
    <link rel="icon" href="./assets/favicon/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="./assets/favicon/favicon.ico" type="image/x-icon">
    <title>This Means War!</title>
</head>
<body class="d-flex flex-column">
    <main class="border column border-warning d-flex justify-content-center align-items-center">
        <div id="card-table" class="column border border-5">
            <div id="black-space" class="align-items-center border border-primary border-5">
                <div id="computer-name-box" class="d-flex justify-content-center align-content-center"><p>Computer</p></div>
                <div id="black-cards" class="row">
                    <div id="black-win-pile" class="col-sm-3 d-flex justify-content-center hhand-compact">
                        <p><!-- WINPILE GOES HERE --></p>
                    </div>
                    <div id="black-deck" class="col-sm-3 d-flex justify-content-center">
                        <p><!-- DECK GOES HERE --></p>
                    </div>
                </div>
            </div>

            <div id="battleground" class="d-flex justify-content-center align-items-center border border-primary border-1">
                <div id="war-black-space" class="row d-flex justify-content-center align-items-center border border-primary border-1">
                    <div id="war-black-round-2" class="hhand-compact"></div>
                </div>
                <div id="battleground-play-space" class="row d-flex justify-content-center align-items-center border border-primary border-1">
                    <div id="war-black-round-1" class="hhand-compact"></div>
                    <div id="war-red-round-1" class="hhand-compact"></div>
                </div>
                <div id="war-red-space" class="row d-flex justify-content-center align-items-center border border-primary border-1">
                    <div id="war-red-round-2" class="hhand-compact"></div>
                </div>
            </div>

            <div id="red-space" class="align-items-center border border-primary border-5">
                <div id="red-cards" class="row">
                    <div id="red-deck" class="col-sm-3 d-flex justify-content-center align-items-center">
                        <p><!-- DECK GOES HERE --></p>
                    </div>
                    <div id="red-win-pile" class="col-sm-3 d-flex justify-content-center align-items-center hhand-compact">
                        <p><!-- WINPILE GOES HERE --></p>
                    </div>
                </div>
                <div id="red-name-box" class="d-flex justify-content-center align-content-center align-items-center"><p>Active Player</p></div>
            </div>
        </div>
        
    </main>
    <section class="container-fluid row">
        <div class="text-center m-2 p-2">
            <button onclick="saveGameState()" class="btn btn-success m-1 p-1" id="save-game-button">Save & Exit Game</button>
            <button onclick="run()" class="btn btn-warning m-1 p-1" id="start-game-button">Start Game</button>
            <button onclick="turn()" class="btn btn-warning m-1 p-1" id="test-turn-button">Take Turn</button>
            <button class="btn btn-success m-1 p-1" data-bs-toggle="modal" data-bs-target="#formModal">Review Game Rules</button>
            <span id="🔊" class="btn btn-success m-1 p-1">🔊
                <audio id="disco-ultralounge" loop>
                    <source src="./assets/sound/disco-ultralounge-kevin-macleod.mp3" type="audio/mpeg">
                    <source src="./assets/sound/disco-ultralounge-kevin-macleod.mp3" type="audio/ogg">
                </audio>
            </span>
        </div>
        <!-- Modal: Display Rules -->
        <div class="modal fade" id="formModal" tabindex="-1" aria-labelledby="formModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h1 class="modal-title fs-5" id="formModalLabel">🪖Rules of Engagement🎖️</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="modal-body">
                <span class="col-md-6">The game is played in iterative rounds/turns, with both players making their move simultaneously each round/turn.<br><br>Battle begins: Players simultaneously flip and reveal the top card of their Hand (by clicking the Hand), which appears in the center Battlefield section.<br><br>The player with the higher card rank wins the Battle, and takes both played cards, placing them face down on their 'Spoils of War' stack.<br><br>If the cards in the Battle are the same rank, the players enter a War!<br><br>If War Breaks Out:<br><br>Both players get the next three cards from their pile face down and place them in their respective Encampments, next to the Battlefield. They each then draw a fourth card and place it face up on their Battlefield stack, to fight once again.<br><br>The player with the higher face-up card on their side of the Battlefield of course wins the War round and adds all the cards on the table to the bottom of their Hand pile. They take both piles, placing them face down on their 'Spoils of War' stack.<br><br>If players' new face-up Battlefield cards are the same rank, the War continues (repeat War Step 1)! This mean the longer your current War drags on, the bigger the gains for the winner (and the more catastrophic the losses for their foe)!<br><br>When a player runs out of cards in their Hand pile, they shuffle their Spoils of War back into it so they can keep playing.<br><br>The game continues in this fashion until a player wins via a higher card rank, or until a player runs out of cards COMPLETELY (i.e. no cards in Hand pile, and no remaining cards in the Spoils of War; player can turn their last card face up, and these count as their played card in the war.).<br><br>If a player runs out of cards COMPLETELY in the middle of a War, they LOSE THE GAME entirely.<br><br>If a player wins a War without either player running out of cards, the game continues from Battle Begins.<br><br>The game as a whole continues until one player wins all the cards from the table. The player who took all the cards is the winner!
                </span>
                </div>
                </div>
                <div class="modal-footer justify-content-center">
                </div>          
            </div>
        </div>
        <div class="modal fade" id="lose-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">🏳️GAME OVER🏳️</h1>
                    </div>
                    <div class="modal-body">
                        You lose.
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="leaveGame()">Steel Resolve?</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="win-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">🎖️GAME OVER🎖️</h1>
                    </div>
                    <div class="modal-body">
                        You win!
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" onclick="leaveGame()">March On?</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./assets/js/speaker.js"></script>
    <!-- <script src="./assets/js/cards.js"></script> -->
    <script src="./assets/js/gamelogic-display.js"></script>
</body>
</html>
